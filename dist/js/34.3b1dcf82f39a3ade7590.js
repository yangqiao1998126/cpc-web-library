webpackJsonp([34],{IRRc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("4YfN"),i=n.n(o),s=n("bSIt"),a=n("BSu/"),r=n("PTN3"),l=n("x8hL"),h={data:function(){return{renderer:"",scene:"",camera:"",stats:"",lightBox:"",helperBox:"",objBox:"",clock:"",orbitControls:"",transformControls:"",animationFrame:""}},methods:i()({init:function(){this.initRender(),this.initCamera(),this.initObj(),this.initLight(),this.initHelper(),this.initStats(),this.initOrbitControls(),this.initTranformControls(),this.updateRenderer()},initRender:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.$refs["three-canvas"].appendChild(this.renderer.domElement),this.renderer.setClearColor("rgb(15, 1, 25)")},initLight:function(){this.scene.add(this.lightBox.ambientLight)},initCamera:function(){this.camera.position.x=400,this.camera.position.y=400,this.camera.position.z=400,this.camera.up.x=0,this.camera.up.y=1,this.camera.up.z=0,this.camera.lookAt(new THREE.Vector3(0,0,0))},initObj:function(){var e=new THREE.BoxGeometry(100,100,100,4,4),t=new THREE.MeshLambertMaterial({color:"rgb(115, 30, 150)"});this.objBox.obj1=new THREE.Mesh(e,t),this.objBox.obj1.position.set(0,50,0),this.scene.add(this.objBox.obj1)},initHelper:function(){this.scene.add(this.helperBox.axesHelper.helper),this.scene.add(this.helperBox.gridHelper.helper)},initStats:function(){this.stats.setMode(0),this.stats.domElement.id="three-stats",this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="unset",this.stats.domElement.style.right="0px",this.stats.domElement.style.top="0px",document.body.appendChild(this.stats.domElement)},initOrbitControls:function(){this.orbitControls=new r.a(this.camera,this.renderer.domElement),this.orbitControls.autoRotate=!0,this.orbitControls.enablePan=!1,this.orbitControls.mouseButtons={LEFT:THREE.MOUSE.PAN,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.ROTATE}},initTranformControls:function(){this.transformControls=new l.a(this.camera,this.renderer.domElement),this.transformControls.attach(this.objBox.obj1),this.scene.add(this.transformControls)},animation:function(){},updateRenderer:function(){var e=this.clock.getDelta();this.orbitControls.update(e),this.renderer.render(this.scene,this.camera),this.stats.update(),this.animationFrame=requestAnimationFrame(this.updateRenderer)},clearObjCache:function(e){e.geometry.dispose(),e.material.dispose()},clearCache:function(){this.renderer.clear(!0,!0,!0),this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer.domElement=null,this.clearObjCache(this.objBox.obj1),this.scene.dispose()}},Object(s.b)(["resetThreeTipsFun","resetThreeLinkFun"])),created:function(){this.resetThreeTipsFun("    相机旋转：鼠标左键键  相机移动：鼠标右键  相机缩放：鼠标滚轮\n    设置物体位移：W  设置物体旋转：E  设置物体缩放：R\n    控制X轴：X  控制Y轴：Y   控制Z轴：Z\n    变换固定位移100旋转15度缩放0.25：shift\n    设置控制器大小： +/-\n    禁用/启用控制器：空格 "),this.resetThreeLinkFun("geometry/controlObj.vue")},beforeMount:function(){this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e4),this.stats=new a.a,this.lightBox={ambientLight:new THREE.AmbientLight("rgb(255, 255, 255)")},this.helperBox={axesHelper:{helper:new THREE.AxesHelper(1e4)},gridHelper:{helper:new THREE.GridHelper(1500,30,"white","rgb(150, 150, 150)")}},this.objBox={obj1:""},this.clock=new THREE.Clock},mounted:function(){var e=this;this.init(),window.onkeydown=function(t){switch(t.keyCode){case 81:e.transformControls.setSpace("local"===e.transformControls.space?"world":"local");break;case 16:e.transformControls.setTranslationSnap(100),e.transformControls.setRotationSnap(THREE.MathUtils.degToRad(15)),e.transformControls.setScaleSnap(.25);break;case 87:e.transformControls.setMode("translate");break;case 69:e.transformControls.setMode("rotate");break;case 82:e.transformControls.setMode("scale");break;case 187:case 107:e.transformControls.setSize(e.transformControls.size+.1);break;case 189:case 109:e.transformControls.setSize(Math.max(e.transformControls.size-.1,.1));break;case 88:e.transformControls.showX=!e.transformControls.showX;break;case 89:e.transformControls.showY=!e.transformControls.showY;break;case 90:e.transformControls.showZ=!e.transformControls.showZ;break;case 32:e.transformControls.enabled=!e.transformControls.enabled}}},beforeDestroy:function(){document.body.removeChild(document.getElementById("three-stats")),window.onkeydown=null,this.renderer=null,this.scene=null,this.camera=null,this.lightBox=null,this.helperBox=null,this.objBox=null,this.clock=null,this.orbitControls=null,this.transformControls=null,cancelAnimationFrame(this.animationFrame)}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"three-display three-init"},[t("div",{ref:"three-canvas",staticClass:"three-canvas",attrs:{id:"three-canvas"}})])},staticRenderFns:[]};var p=n("C7Lr")(h,c,!1,function(e){n("Yzk+")},"data-v-67674e76",null);t.default=p.exports},"Yzk+":function(e,t){},x8hL:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("C/Nv"),i=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),o.T.call(this),this.visible=!1,this.domElement=t;var n=new s;this.add(n);var i=new a;this.add(i);var r=this;F("camera",e),F("object",void 0),F("enabled",!0),F("axis",null),F("mode","translate"),F("translationSnap",null),F("rotationSnap",null),F("scaleSnap",null),F("space","world"),F("size",1),F("dragging",!1),F("showX",!0),F("showY",!0),F("showZ",!0);var l={type:"change"},h={type:"mouseDown"},c={type:"mouseUp",mode:r.mode},p={type:"objectChange"},d=new o._4,u=new o._23,m=new o._23,w=new o._1,y={X:new o._23(1,0,0),Y:new o._23(0,1,0),Z:new o._23(0,0,1)},b=new o._23,v=new o._23,f=new o._23,g=new o._23,M=new o._23,x=new o._23,E=0,C=new o._23,L=new o._1,Y=new o._23,P=new o._23,S=new o._1,X=new o._1,Z=new o._23,T=new o._23,_=new o._1,j=new o._23,I=new o._23,k=new o._1,z=new o._1,Q=new o._23,R=new o._23,A=new o._23,O=new o._1,H=new o._23;function F(e,t){var o=t;Object.defineProperty(r,e,{get:function(){return void 0!==o?o:t},set:function(t){o!==t&&(o=t,i[e]=t,n[e]=t,r.dispatchEvent({type:e+"-changed",value:t}),r.dispatchEvent(l))}}),r[e]=t,i[e]=t,n[e]=t}function W(e){if(document.pointerLockElement)return{x:0,y:0,button:e.button};var n=e.changedTouches?e.changedTouches[0]:e,o=t.getBoundingClientRect();return{x:(n.clientX-o.left)/o.width*2-1,y:-(n.clientY-o.top)/o.height*2+1,button:e.button}}function B(e){r.enabled&&r.pointerHover(W(e))}function q(e){r.enabled&&(document.addEventListener("mousemove",U,!1),r.pointerHover(W(e)),r.pointerDown(W(e)))}function U(e){r.enabled&&r.pointerMove(W(e))}function D(e){r.enabled&&(document.removeEventListener("mousemove",U,!1),r.pointerUp(W(e)))}F("worldPosition",I),F("worldPositionStart",T),F("worldQuaternion",k),F("worldQuaternionStart",_),F("cameraPosition",C),F("cameraQuaternion",L),F("pointStart",b),F("pointEnd",v),F("rotationAxis",g),F("rotationAngle",E),F("eye",R),t.addEventListener("mousedown",q,!1),t.addEventListener("touchstart",q,!1),t.addEventListener("mousemove",B,!1),t.addEventListener("touchmove",B,!1),t.addEventListener("touchmove",U,!1),document.addEventListener("mouseup",D,!1),t.addEventListener("touchend",D,!1),t.addEventListener("touchcancel",D,!1),t.addEventListener("touchleave",D,!1),this.dispose=function(){t.removeEventListener("mousedown",q),t.removeEventListener("touchstart",q),t.removeEventListener("mousemove",B),document.removeEventListener("mousemove",U),t.removeEventListener("touchmove",B),t.removeEventListener("touchmove",U),document.removeEventListener("mouseup",D),t.removeEventListener("touchend",D),t.removeEventListener("touchcancel",D),t.removeEventListener("touchleave",D),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),this.object.parent.matrixWorld.decompose(P,S,Z),this.object.matrixWorld.decompose(I,k,Q),X.copy(S).inverse(),z.copy(k).inverse()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(C,L,Y),R.copy(C).sub(I).normalize(),o.T.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging&&(void 0===e.button||0===e.button)){d.setFromCamera(e,this.camera);var t=d.intersectObjects(n.picker[this.mode].children,!0)[0]||!1;this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(!(void 0===this.object||!0===this.dragging||void 0!==e.button&&0!==e.button||0!==e.button&&void 0!==e.button||null===this.axis)){d.setFromCamera(e,this.camera);var t=d.intersectObjects([i],!0)[0]||!1;if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var o=this.rotationSnap;"X"===this.axis&&o&&(this.object.rotation.x=Math.round(this.object.rotation.x/o)*o),"Y"===this.axis&&o&&(this.object.rotation.y=Math.round(this.object.rotation.y/o)*o),"Z"===this.axis&&o&&(this.object.rotation.z=Math.round(this.object.rotation.z/o)*o)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),A.copy(this.object.position),O.copy(this.object.quaternion),H.copy(this.object.scale),this.object.matrixWorld.decompose(T,_,j),b.copy(t.point).sub(T)}this.dragging=!0,h.mode=this.mode,this.dispatchEvent(h)}},this.pointerMove=function(e){var t=this.axis,n=this.mode,o=this.object,s=this.space;if("scale"===n?s="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(s="world"),void 0!==o&&null!==t&&!1!==this.dragging&&(void 0===e.button||0===e.button)){d.setFromCamera(e,this.camera);var a=d.intersectObjects([i],!0)[0]||!1;if(!1!==a){if(v.copy(a.point).sub(T),"translate"===n)f.copy(v).sub(b),"local"===s&&"XYZ"!==t&&f.applyQuaternion(z),-1===t.indexOf("X")&&(f.x=0),-1===t.indexOf("Y")&&(f.y=0),-1===t.indexOf("Z")&&(f.z=0),"local"===s&&"XYZ"!==t?f.applyQuaternion(O).divide(Z):f.applyQuaternion(X).divide(Z),o.position.copy(f).add(A),this.translationSnap&&("local"===s&&(o.position.applyQuaternion(w.copy(O).inverse()),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(O)),"world"===s&&(o.parent&&o.position.add(u.setFromMatrixPosition(o.parent.matrixWorld)),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(u.setFromMatrixPosition(o.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var r=v.length()/b.length();v.dot(b)<0&&(r*=-1),m.set(r,r,r)}else u.copy(b),m.copy(v),u.applyQuaternion(z),m.applyQuaternion(z),m.divide(u),-1===t.search("X")&&(m.x=1),-1===t.search("Y")&&(m.y=1),-1===t.search("Z")&&(m.z=1);o.scale.copy(H).multiply(m),this.scaleSnap&&(-1!==t.search("X")&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){f.copy(v).sub(b);var h=20/I.distanceTo(u.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(g.copy(R),E=v.angleTo(b),M.copy(b).normalize(),x.copy(v).normalize(),E*=x.cross(M).dot(R)<0?1:-1):"XYZE"===t?(g.copy(f).cross(R).normalize(),E=f.dot(u.copy(g).cross(this.eye))*h):"X"!==t&&"Y"!==t&&"Z"!==t||(g.copy(y[t]),u.copy(y[t]),"local"===s&&u.applyQuaternion(k),E=f.dot(u.cross(R).normalize())*h),this.rotationSnap&&(E=Math.round(E/this.rotationSnap)*this.rotationSnap),this.rotationAngle=E,"local"===s&&"E"!==t&&"XYZE"!==t?(o.quaternion.copy(O),o.quaternion.multiply(w.setFromAxisAngle(g,E)).normalize()):(g.applyQuaternion(X),o.quaternion.copy(w.setFromAxisAngle(g,E)),o.quaternion.multiply(O).normalize())}this.dispatchEvent(l),this.dispatchEvent(p)}}},this.pointerUp=function(e){void 0!==e.button&&0!==e.button||(this.dragging&&null!==this.axis&&(c.mode=this.mode,this.dispatchEvent(c)),this.dragging=!1,void 0===e.button&&(this.axis=null))},this.getMode=function(){return r.mode},this.setMode=function(e){r.mode=e},this.setTranslationSnap=function(e){r.translationSnap=e},this.setRotationSnap=function(e){r.rotationSnap=e},this.setScaleSnap=function(e){r.scaleSnap=e},this.setSize=function(e){r.size=e},this.setSpace=function(e){r.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};i.prototype=Object.assign(Object.create(o.T.prototype),{constructor:i,isTransformControls:!0});var s=function(){o.T.call(this),this.type="TransformControlsGizmo";var e=new o.M({depthTest:!1,depthWrite:!1,transparent:!0,side:o.r,fog:!1}),t=new o.D({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1}),n=e.clone();n.opacity=.15;var i=e.clone();i.opacity=.33;var s=e.clone();s.color.set(16711680);var a=e.clone();a.color.set(65280);var r=e.clone();r.color.set(255);var l=e.clone();l.opacity=.25;var h=l.clone();h.color.set(16776960);var c=l.clone();c.color.set(65535);var p=l.clone();p.color.set(16711935),e.clone().color.set(16776960);var d=t.clone();d.color.set(16711680);var u=t.clone();u.color.set(65280);var m=t.clone();m.color.set(255);var w=t.clone();w.color.set(65535);var y=t.clone();y.color.set(16711935);var b=t.clone();b.color.set(16776960);var v=t.clone();v.color.set(7895160);var f=b.clone();f.opacity=.25;var g=new o.o(0,.05,.2,12,1,!1),M=new o.g(.125,.125,.125),x=new o.i;x.setAttribute("position",new o.w([0,0,0,1,0,0],3));var E,C=function(e,t){for(var n=new o.i,i=[],s=0;s<=64*t;++s)i.push(0,Math.cos(s/32*Math.PI)*e,Math.sin(s/32*Math.PI)*e);return n.setAttribute("position",new o.w(i,3)),n},L={X:[[new o.L(g,s),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new o.L(g,s),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new o.C(x,d)]],Y:[[new o.L(g,a),[0,1,0],null,null,"fwd"],[new o.L(g,a),[0,1,0],[Math.PI,0,0],null,"bwd"],[new o.C(x,u),null,[0,0,Math.PI/2]]],Z:[[new o.L(g,r),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new o.L(g,r),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new o.C(x,m),null,[0,-Math.PI/2,0]]],XYZ:[[new o.L(new o.U(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new o.L(new o.Y(.295,.295),h.clone()),[.15,.15,0]],[new o.C(x,b),[.18,.3,0],null,[.125,1,1]],[new o.C(x,b),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new o.L(new o.Y(.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new o.C(x,w),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new o.C(x,w),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new o.L(new o.Y(.295,.295),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new o.C(x,y),[.18,0,.3],null,[.125,1,1]],[new o.C(x,y),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},Y={X:[[new o.L(new o.o(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new o.L(new o.o(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new o.L(new o.o(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new o.L(new o.U(.2,0),n)]],XY:[[new o.L(new o.Y(.4,.4),n),[.2,.2,0]]],YZ:[[new o.L(new o.Y(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new o.L(new o.Y(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},P={START:[[new o.L(new o.U(.01,2),i),null,null,null,"helper"]],END:[[new o.L(new o.U(.01,2),i),null,null,null,"helper"]],DELTA:[[new o.C((E=new o.i,E.setAttribute("position",new o.w([0,0,0,1,1,1],3)),E),i),null,null,null,"helper"]],X:[[new o.C(x,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new o.C(x,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new o.C(x,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},S={X:[[new o.C(C(1,.5),d)],[new o.L(new o.U(.04,0),s),[0,0,.99],null,[1,3,1]]],Y:[[new o.C(C(1,.5),u),null,[0,0,-Math.PI/2]],[new o.L(new o.U(.04,0),a),[0,0,.99],null,[3,1,1]]],Z:[[new o.C(C(1,.5),m),null,[0,Math.PI/2,0]],[new o.L(new o.U(.04,0),r),[.99,0,0],null,[1,3,1]]],E:[[new o.C(C(1.25,1),f),null,[0,Math.PI/2,0]],[new o.L(new o.o(.03,0,.15,4,1,!1),f),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new o.L(new o.o(.03,0,.15,4,1,!1),f),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new o.L(new o.o(.03,0,.15,4,1,!1),f),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new o.L(new o.o(.03,0,.15,4,1,!1),f),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new o.C(C(1,1),v),null,[0,Math.PI/2,0]]]},X={AXIS:[[new o.C(x,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Z={X:[[new o.L(new o._17(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new o.L(new o._17(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new o.L(new o._17(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new o.L(new o._17(1.25,.1,2,24),n)]],XYZE:[[new o.L(new o._10(.7,10,8),n)]]},T={X:[[new o.L(M,s),[.8,0,0],[0,0,-Math.PI/2]],[new o.C(x,d),null,null,[.8,1,1]]],Y:[[new o.L(M,a),[0,.8,0]],[new o.C(x,u),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new o.L(M,r),[0,0,.8],[Math.PI/2,0,0]],[new o.C(x,m),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new o.L(M,h),[.85,.85,0],null,[2,2,.2]],[new o.C(x,b),[.855,.98,0],null,[.125,1,1]],[new o.C(x,b),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new o.L(M,c),[0,.85,.85],null,[.2,2,2]],[new o.C(x,w),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new o.C(x,w),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new o.L(M,p),[.85,0,.85],null,[2,.2,2]],[new o.C(x,y),[.855,0,.98],null,[.125,1,1]],[new o.C(x,y),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new o.L(new o.g(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new o.L(new o.g(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new o.L(new o.g(.125,.125,.125),l.clone()),[0,0,1.1]]]},_={X:[[new o.L(new o.o(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new o.L(new o.o(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new o.L(new o.o(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new o.L(M,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new o.L(M,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new o.L(M,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new o.L(new o.g(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new o.L(new o.g(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new o.L(new o.g(.2,.2,.2),n),[0,0,1.1]]]},j={X:[[new o.C(x,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new o.C(x,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new o.C(x,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},I=function(e){var t=new o.T;for(var n in e)for(var i=e[n].length;i--;){var s=e[n][i][0].clone(),a=e[n][i][1],r=e[n][i][2],l=e[n][i][3],h=e[n][i][4];s.name=n,s.tag=h,a&&s.position.set(a[0],a[1],a[2]),r&&s.rotation.set(r[0],r[1],r[2]),l&&s.scale.set(l[0],l[1],l[2]),s.updateMatrix();var c=s.geometry.clone();c.applyMatrix4(s.matrix),s.geometry=c,s.renderOrder=1/0,s.position.set(0,0,0),s.rotation.set(0,0,0),s.scale.set(1,1,1),t.add(s)}return t},k=new o._23(0,0,0),z=new o.t,Q=new o._23(0,1,0),R=new o._23(0,0,0),A=new o.K,O=new o._1,H=new o._1,F=new o._1,W=new o._23(1,0,0),B=new o._23(0,1,0),q=new o._23(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=I(L)),this.add(this.gizmo.rotate=I(S)),this.add(this.gizmo.scale=I(T)),this.add(this.picker.translate=I(Y)),this.add(this.picker.rotate=I(Z)),this.add(this.picker.scale=I(_)),this.add(this.helper.translate=I(P)),this.add(this.helper.rotate=I(X)),this.add(this.helper.scale=I(j)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:F;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var n=[];n=(n=(n=n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var i=0;i<n.length;i++){var s=n[i];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);var a=this.worldPosition.distanceTo(this.cameraPosition);if(s.scale.set(1,1,1).multiplyScalar(a*this.size/7),"helper"!==s.tag){if(s.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==s.name&&"XYZX"!==s.name||Math.abs(Q.copy(W).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"Y"!==s.name&&"XYZY"!==s.name||Math.abs(Q.copy(B).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"Z"!==s.name&&"XYZZ"!==s.name||Math.abs(Q.copy(q).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"XY"===s.name&&Math.abs(Q.copy(q).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"YZ"===s.name&&Math.abs(Q.copy(W).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"XZ"===s.name&&Math.abs(Q.copy(B).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),-1!==s.name.search("X")&&(Q.copy(W).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.x*=-1:"bwd"===s.tag&&(s.visible=!1)),-1!==s.name.search("Y")&&(Q.copy(B).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.y*=-1:"bwd"===s.tag&&(s.visible=!1)),-1!==s.name.search("Z")&&(Q.copy(q).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.z*=-1:"bwd"===s.tag&&(s.visible=!1))}else"rotate"===this.mode&&(H.copy(t),Q.copy(this.eye).applyQuaternion(O.copy(t).inverse()),-1!==s.name.search("E")&&s.quaternion.setFromRotationMatrix(A.lookAt(this.eye,R,B)),"X"===s.name&&(O.setFromAxisAngle(W,Math.atan2(-Q.y,Q.z)),O.multiplyQuaternions(H,O),s.quaternion.copy(O)),"Y"===s.name&&(O.setFromAxisAngle(B,Math.atan2(Q.x,Q.z)),O.multiplyQuaternions(H,O),s.quaternion.copy(O)),"Z"===s.name&&(O.setFromAxisAngle(q,Math.atan2(Q.y,Q.x)),O.multiplyQuaternions(H,O),s.quaternion.copy(O)));s.visible=s.visible&&(-1===s.name.indexOf("X")||this.showX),s.visible=s.visible&&(-1===s.name.indexOf("Y")||this.showY),s.visible=s.visible&&(-1===s.name.indexOf("Z")||this.showZ),s.visible=s.visible&&(-1===s.name.indexOf("E")||this.showX&&this.showY&&this.showZ),s.material._opacity=s.material._opacity||s.material.opacity,s.material._color=s.material._color||s.material.color.clone(),s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled?this.axis&&(s.name===this.axis?(s.material.opacity=1,s.material.color.lerp(new o.l(1,1,1),.5)):this.axis.split("").some(function(e){return s.name===e})?(s.material.opacity=1,s.material.color.lerp(new o.l(1,1,1),.5)):(s.material.opacity*=.25,s.material.color.lerp(new o.l(1,1,1),.5))):(s.material.opacity*=.5,s.material.color.lerp(new o.l(1,1,1),.5))}else s.visible=!1,"AXIS"===s.name?(s.position.copy(this.worldPositionStart),s.visible=!!this.axis,"X"===this.axis&&(O.setFromEuler(z.set(0,0,0)),s.quaternion.copy(t).multiply(O),Math.abs(Q.copy(W).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"Y"===this.axis&&(O.setFromEuler(z.set(0,0,Math.PI/2)),s.quaternion.copy(t).multiply(O),Math.abs(Q.copy(B).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"Z"===this.axis&&(O.setFromEuler(z.set(0,Math.PI/2,0)),s.quaternion.copy(t).multiply(O),Math.abs(Q.copy(q).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"XYZE"===this.axis&&(O.setFromEuler(z.set(0,Math.PI/2,0)),Q.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(A.lookAt(R,Q,B)),s.quaternion.multiply(O),s.visible=this.dragging),"E"===this.axis&&(s.visible=!1)):"START"===s.name?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):"END"===s.name?(s.position.copy(this.worldPosition),s.visible=this.dragging):"DELTA"===s.name?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),k.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),k.applyQuaternion(this.worldQuaternionStart.clone().inverse()),s.scale.copy(k),s.visible=this.dragging):(s.quaternion.copy(t),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=-1!==this.axis.search(s.name)))}o.T.prototype.updateMatrixWorld.call(this)}};s.prototype=Object.assign(Object.create(o.T.prototype),{constructor:s,isTransformControlsGizmo:!0});var a=function(){o.L.call(this,new o.Y(1e5,1e5,2,2),new o.M({visible:!1,wireframe:!0,side:o.r,transparent:!0,opacity:.1})),this.type="TransformControlsPlane";var e=new o._23(1,0,0),t=new o._23(0,1,0),n=new o._23(0,0,1),i=new o._23,s=new o._23,a=new o._23,r=new o.K,l=new o._1;this.updateMatrixWorld=function(){var h=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(h="local"),e.set(1,0,0).applyQuaternion("local"===h?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===h?this.worldQuaternion:l),n.set(0,0,1).applyQuaternion("local"===h?this.worldQuaternion:l),a.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":a.copy(this.eye).cross(e),s.copy(e).cross(a);break;case"Y":a.copy(this.eye).cross(t),s.copy(t).cross(a);break;case"Z":a.copy(this.eye).cross(n),s.copy(n).cross(a);break;case"XY":s.copy(n);break;case"YZ":s.copy(e);break;case"XZ":a.copy(n),s.copy(t);break;case"XYZ":case"E":s.set(0,0,0)}break;case"rotate":default:s.set(0,0,0)}0===s.length()?this.quaternion.copy(this.cameraQuaternion):(r.lookAt(i.set(0,0,0),s,a),this.quaternion.setFromRotationMatrix(r)),o.T.prototype.updateMatrixWorld.call(this)}};a.prototype=Object.assign(Object.create(o.L.prototype),{constructor:a,isTransformControlsPlane:!0})}});